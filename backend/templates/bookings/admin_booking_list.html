{% extends "admin_base.html" %}

{% block title %}Bookings (Admin) | EMS{% endblock %}

{% block extra_head %}
<style>
  .admin-hero {
      border-radius: 18px;
      padding: 22px 24px;
      background: linear-gradient(135deg, #6C63FF 0%, #00B4D8 100%);
      color: white;
      box-shadow: 0 10px 26px rgba(0,0,0,0.16);
      margin-bottom: 24px;
  }
  .admin-hero-title { font-size: 1.6rem; font-weight: 600; }
</style>
{% endblock %}

{% block content %}

<div class="admin-hero">
  <div class="d-flex flex-column flex-md-row justify-content-between align-items-md-center">
    <div class="mb-3 mb-md-0">
      <div class="admin-hero-title mb-1">Bookings</div>
      <div class="small">
        Manage all bookings stored in the BOOKING table.
      </div>
    </div>
    <div class="text-md-end">
      <a href="{% url 'admin_dashboard' %}" class="btn btn-light btn-sm text-dark me-2">
        Back to admin dashboard
      </a>
      <a href="{% url 'admin_booking_create' %}" class="btn btn-outline-light btn-sm">
        + New booking
      </a>
    </div>
  </div>
</div>

<div class="card shadow-sm">
  <div class="card-body">
    {% if bookings %}
      <div class="table-responsive">
        <table class="table table-hover table-sm align-middle">
          <thead class="table-light">
            <tr>
              <th>ID</th>
              <th>Event</th>
              <th>Customer</th>
              <th>Tickets</th>
              <th>Total</th>
              <th>Status</th>
              <th>Booked at</th>
              <th class="text-end">Actions</th>
            </tr>
          </thead>
          <tbody>
            {% for booking in bookings %}
              <tr>
                <td>#{{ booking.booking_id }}</td>
                <td>{{ booking.event.title }}</td>
                <td>{{ booking.customer.name }}<br><small class="text-muted">{{ booking.customer.email }}</small></td>
                <td>{{ booking.ticket_qty }}</td>
                <td>${{ booking.total_price }}</td>
                <td>{{ booking.status }}</td>
                <td>{{ booking.booked_at|date:"M d, Y h:i A" }}</td>
                <td class="text-end">
                  <a href="{% url 'admin_booking_edit' booking.booking_id %}"
                     class="btn btn-sm btn-outline-secondary me-1">Edit</a>
                  <a href="{% url 'admin_booking_delete' booking.booking_id %}"
                     class="btn btn-sm btn-outline-danger">Delete</a>
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    {% else %}
      <p class="text-muted mb-0">No bookings found.</p>
    {% endif %}
  </div>
</div>

{% endblock %}
